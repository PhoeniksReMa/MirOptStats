{% extends 'base_app.html' %}

{% block title %}Shops{% endblock %}
{% block page_title %}Обзор{% endblock %}

{% block content %}
<div class="card">
    <h2>Мои магазины</h2>
    {% if owned_shops %}
    <table>
        <tr><th>Название</th><th>Маркетплейс</th><th>Действия</th></tr>
        {% for shop in owned_shops %}
        <tr>
            <td>{{ shop.name }}</td>
            <td>{{ shop.get_marketplace_display }}</td>
            <td>
                <a href="{% url 'shops:add_employee' shop.id %}">Сотрудники</a> |
                <a href="{% url 'ozon:report_list' shop.id %}">Ozon отчеты</a> |
                <form method="post" action="{% url 'shops:sync' shop.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" style="width:auto; padding:6px 10px;">Обновить данные</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>Пока нет созданных магазинов.</p>
    {% endif %}
</div>

<div class="card">
    <h2>Где я сотрудник</h2>
    {% if member_shops %}
    <table>
        <tr><th>Название</th><th>Маркетплейс</th></tr>
        {% for shop in member_shops %}
        <tr>
            <td>{{ shop.name }}</td>
            <td>{{ shop.get_marketplace_display }}</td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>Нет активных приглашений.</p>
    {% endif %}
</div>
{% endblock %}
